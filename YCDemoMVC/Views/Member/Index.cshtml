@model YCDemoMVC.Models.MemberIndexViewModel

@{
    Layout = "_Layout";
}

@using (Html.BeginForm("Index", "Member", FormMethod.Post, new {enctype = "multipart/form-data", id = "FormPage"}))
{
    <div class="table-title">
	    <div class="row">
		    @* <b>Details</b> *@
		    <div class="col-sm-8">
			    <h2>Member List</h2></div>
		    <div class="col-sm-4">
			    <div class="search-box">
				    <i class="material-icons">&#xE8B6;</i>
				    <input type="text" class="form-control" placeholder="Search&hellip;">
				    <p></p>
				    <button type="button" id="create" class="btn-success">Create</button>
			    </div>
		    </div>
	    </div>
	</div>
	<table class="table table-striped table-hover table-bordered">
	<thead>
		<tr>
			<th>#</th>
			<th>Name <i class="fa fa-sort"></i></th>
			<th>Sex</th>
			<th>Birthday <i class="fa fa-sort"></i></th>
			<th>IdentityNumber</th>
			<th>Email <i class="fa fa-sort"></i></th>
			<th>PhoneNumber</th>
			<th>Address</th>
			<th>Action</th>
		</tr>
	</thead>
	<tbody>
	@{
		var number = 1;
	}
	@if (Model.Members.Any())
	{
		foreach (var member in Model.Members)
		{
			var showSex = member.Sex == "M" ? "男性" : "女性";
			<tr>
				<td>@number</td>
				<td>@member.Name</td>
				<td>@showSex</td>
				<td>@member.Birthday</td>
				<td>@member.IdentityNumber</td>
				<td>@member.Email</td>
				<td>@member.PhoneNumber</td>
				<td>@member.Address</td>
				<td nowrap="nowrap">
					<button type="button" class="btn-primary" id="update" value="@member.Id">Edit</button>
					<button type="button" class="btn-danger" id="delete" value="@member.Id">Delete</button>
				</td>
			</tr>
			number++;
		}
	}
	else
	{
		<tr>
			<td colspan="9">No Data</td>
		</tr>
	}
	</tbody>
	</table>
	<div class="clearfix">
	<div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
	<ul class="pagination">
		<li class="page-item disabled"><a href="#"><i class="fa fa-angle-double-left"></i></a></li>
		<li class="page-item"><a href="#" class="page-link">1</a></li>
		<li class="page-item"><a href="#" class="page-link">2</a></li>
		<li class="page-item active"><a href="#" class="page-link">3</a></li>
		<li class="page-item"><a href="#" class="page-link">4</a></li>
		<li class="page-item"><a href="#" class="page-link">5</a></li>
		<li class="page-item"><a href="#" class="page-link"><i class="fa fa-angle-double-right"></i></a></li>
	</ul>
	</div>
}

<script>
$(function () {
	$("#create").click(function (){
		window.location = "@Url.Action("Create")"
	})
	$("#update").click(function (){
		window.location = "@Url.Action("Edit")?id=" + $(this).val()
	})
	// $("#delete").click(function (){
	// 	window.location = "@Url.Action("Delete")?id=" + $(this).val()
	// })
	$("#delete").click(function (){
		var doDelete = confirm("是否確定刪除?")
		if (doDelete === false) return;
		$.ajax({
			url: "@Url.Action("Delete")?id=" + $(this).val(),
			type: "DELETE",
			dataType: "json",
			contentType: "application/json",
			success: function (data) {
				if (data){
					alert("Success");
					window.location = "@Url.Action("Index")";
				}
			},
			error: function (error){
				alert("Fail");
			}
		});
	});
})
</script>